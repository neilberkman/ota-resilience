schema_version: 1
name: esp_idf_fault_crc_covers_state_crc_schema_guard__f_profile__c_otadata_control
skip_self_test: true
description: 'ESP-IDF crc_covers_state defect counterpart for crc_schema_guard. Uses
  control-scope CRC schema assertions that should fail on the defect''s altered CRC
  semantics.

  '
platform: platforms/cortex_m4_flash_fast.repl
bootloader:
  elf: examples/esp_idf_ota/esp_idf_fault_crc_covers_state.elf
  entry: 0
memory:
  sram:
    start: 536870912
    end: 537133056
  write_granularity: 4
  slots:
    exec:
      base: 49152
      size: 475136
    staging:
      base: 524288
      size: 475136
images:
  exec: examples/esp_idf_ota/slot0.bin
  staging: examples/esp_idf_ota/slot1.bin
pre_boot_state:
- address: 1015808
  u32: 1
- address: 1015832
  u32: 2
- address: 1015836
  u32: 2572957674
- address: 1019904
  u32: 2
- address: 1019928
  u32: 0
- address: 1019932
  u32: 3185244290
- address: 1032256
  u32: 1430540321
success_criteria:
  vtor_in_slot: exec
  otadata_expect_scope: control
  otadata_expect:
    otadata_available: true
    otadata_active_entry: entry1
    otadata0_state_name: VALID
    otadata1_state_name:
    - PENDING_VERIFY
    - UNDEFINED
    otadata0_crc: 1195612314
    otadata1_crc: 1442199412
fault_sweep:
  mode: runtime
  evaluation_mode: execute
  max_writes: auto
  max_writes_cap: 200000
  run_duration: '2.0'
  max_step_limit: 1572864
  fault_types:
  - power_loss
  - interrupted_erase
expect:
  should_find_issues: true
