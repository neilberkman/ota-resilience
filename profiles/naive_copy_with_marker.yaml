schema_version: 1
name: naive_copy_with_marker
description: "Naive OTA with completion marker: copies staging to exec, then writes a marker word. Marker check on boot detects incomplete copies, but cannot recover from them."
platform: platforms/cortex_m0_nvm.repl
bootloader:
  elf: examples/vulnerable_ota/firmware.elf
  entry: 0x10000000
memory:
  sram: { start: 0x20000000, end: 0x20020000 }
  write_granularity: 8
  slots:
    exec: { base: 0x10000000, size: 0x38000 }
    staging: { base: 0x10038000, size: 0x38000 }
images:
  staging: examples/vulnerable_ota/firmware.bin
pre_boot_state:
  - { address: 0x10070000, u32: 0 }
success_criteria:
  vtor_in_slot: exec
  marker_address: 0x10070000
  marker_value: 0xC0FEBEEF
fault_sweep:
  mode: runtime
  max_writes: 28672
  max_writes_cap: 100000
  run_duration: "0.01"
expect:
  should_find_issues: true
  brick_rate_min: 0.9
